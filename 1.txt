Hello Reddit! Today I want to share a project I've been working on all summer. With my summer break ready to end, I thought now would be a good time to do the writeup and post everything online. This is going to be kind of long (but hopefully interesting), so if you don't want to read it, just skip to the tl;dr. This is going to be two part thread. This part is an explanation of my simulator. What it is, where to download it, how to use it. The other thread located https://www.reddit.com/r/magicTCG/comments/4y3ooc/results_of_two_ais_playing_millions_of_games_of/ is some of the results it lead to after playing millions of games of Magic and letting me analyze the results. So lets start with the simplest question: What is it? It's a computer program that's capable of goldfishing games of Magic or playing against an opponent. It is capable of playing the same match thousands or even million of times in minutes and recording match information. While the matchup can be changed with some work, the primary player plays Burn and the secondary player plays Delver. Both lists have their own AI. Overall the Burn AI is a bit stronger because the primary purpose was to optimize that deck. The Delver AI is more generalized so that it can be used for other opponents in the future, and has had less development time placed on it overall so it's a bit weaker. As games are played, whether as a goldfish or against the Delver opponent, the program writes information to an SQLite database. So the next question is what is the database and what does it contain? The database either creates itself when the program is run, or appends to the existing database. Each new set of decks creates a new entry based on the decklist. The database consists of 6 tables. The main table is tableDeck. By referencing tableDeck you can look at tableGames and see all of the games played with a specific deck. From here tableDraw and tableTurns can be examined through referencing tableGames to see all of the cards drawn in a certain game, or all of the turns taken in a specific game. This is also done for tableBoard and tableHand which reference tableTurns in a similar method. Using this information, several questions can be answered that are normally very difficult to answer. For some examples, these are 5 questions that I answered by running the program (more about this in the other thread): What is the average win turn of games where 2 Goblin Guides are drawn compared to games where 0 are drawn? What factors are most common to hands that result in a T3 or T4 win? How much damage does Monastery Swiftspear deal in games of X length? What is it's true average power? Is it more or less than Goblin Guide? How many extra games am I going to lose because I'm playing fetchlands vs Mountains? How many extra games am I going to win for the same reason? How much do cantrips really impact my draws and optimal land counts? The information written to the database is for Burn only (but this is easily changed if someone wants to, though you'll have to edit the code a bit) and consists of tables for the following information: tableDeck – The decklist being used. tableGames – Game specific information like total mulligans, mulligan reasons, and number of turns. tableDraw – Cards drawn each turn (includes cards drawn and shuffled away on a mulligan). tableTurns – Turn specific information like mana available, life totals, turn number, and turn count mechanics like prowess. tableBoard – Lists the cards on the board at the time. tableHand – Lists the cards in hand at the time. All of this information combined isn't a complete snapshot of the game at every moment, but it's close. Next step: Running the program. This is pretty straightforward. Put the program in a directory (I would recommend putting it on a very fast hard drive, or using a 3rd party utility to create a ramdisk, which is what I did) and run it. It's a Python script so to run it you'll need Python installed and to run it from the command line, or download your favorite Python IDE and run it there. When it's run it will create the database in that directory (named burn.db), and play X games with whatever decklists are specified. Depending on the number of games played per deck, options specified (recording card draws is very slow), how many decklists you choose to run, and the speed of your computer (in particular the speed of whatever medium it's writing the file to) it could take anywhere from 1 second to hours. For reference, I have a pretty nice gaming laptop and without card draw being recorded and writing results to a ramdisk I can run 1000 games in about 90 seconds. Writing to a hard drive it runs 1000 games in 18 minutes. With tableDraw enabled (which is a simple switch at the start of the file) 1000 games takes 5 minutes. Final step: Getting the data. Now that you've run the program, you're going to have a database filled with information about what just transpired. Now you need a way to access the information. If you're a glutton for punishment you can write computer programs to query this information, but there's an easier way. Use an SQLite GUI (I'm using DB Browser for SQLite) and open the database. From there you can write your queries. For those who don't know SQL I've created this handy file of the queries I've used most often. You can get it here http://s000.tinyupload.com/index.php?file_id=74989905526069552633 If you don't know SQL it's pretty simple on the final line of the query just match the numbers up to what you want based on their position in the tables, my table/field names are fairly descriptive. If you do know SQL you can do a lot more, those are still a good starting guide (and the order of the fields in the SELECT statement is a must if you use my spreadsheet I'll be getting to in a moment). Perhaps you'll do something I didn't think of. Getting the data 2: Ascension. If you've mastered getting data out of the database it's time to move to the next level, a level beyond... that of spreadsheets. This is useful for the queries having to do with cards drawn such as the 3rd and final queries in the file I linked. It will also be useful for anything similar. Basically, this is a spreadsheet where in the first sheet you can paste in query results, and in the second sheet you can how common a card was in that outcome, compared to how common it would be if all cards were equally powerful. The way to use the second tab in the spreadsheet is this. After pasting the data in, input the correct number of games in fields M2 through M5 (these are how common games are in turn 3, 4, 5, and 6 wins) and make note of the numbers in column E (which are in bold). Copy those numbers into the appropriate column, F through I. What these numbers represent is something of a card score. It subtracts the average rate the card showed up, from the average rate it should have shown up and provides that number as the spread. Lower numbers are better, higher numbers are worse. This will always normalize to 0 across the entire deck. So what this means is that the card in your deck with the lowest number is your best card (the card you want to add more of) while the card in your deck with the highest number is your worst card (the card you want to remove). The logic here is that by recording these numbers and weighing them against how common wins are on each turn you can tune the deck for optimal performance against a range of fast/slow decks, or focus on certain turns to tune against just one. This system is somewhat slow and error prone if you have to compare multiple decks, but it's what exists for now. You can download the spreadsheet here http://s000.tinyupload.com/index.php?file_id=01076950298323579691 it's in Open Office format. TL;DR – Give me the program! You asked for it, so here it is. https://github.com/masselin/Simulator I don't normally post my code online, or really adhere to any style guides, so I do hope my comments make everything readable enough. One thing I want to point out to anyone who wants to tinker with things or run the code. In the setParams function starting somewhere around line 46 is a bunch of commented out decks (with a couple uncommented, just to make you dig through and fix that). Those decklists are for the most part lists that have had one or two revisions each through my spreadsheet to make something optimal. They aren't completely optimized but if you're looking to tweak things, they're a good place to start as far as mana curve goes.